{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/loaderBtnFunction.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const formRef = document.querySelector(\".form\");\nexport const inputRef = document.querySelector(\"#text-search\");\nexport const galleryRef = document.querySelector(\".gallery\");\nexport let queryInput;\n\nexport async function fetchImg(queryInput, page, perPage) {\n    //  queryInput = encodeURIComponent(queryInput);\n    // galleryRef.innerHTML = '<div class=\"loader\"></div>';\n\n    const response = await axios.get(`https://pixabay.com/api/`, {\n        params: {\n        key: \"42941180-7fae3d0b9e1a356f3d7e2df26\",\n        q: queryInput,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n    }\n})\n\n    return response.data;\n}\n       ","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { galleryRef } from \"./pixabay-api\";\n\nexport function createMarkup(data) {\n    galleryRef.innerHTML = '';\n    const images = data.hits;\n    if (images.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n        }\n      const markup = images.map(\n    (image)=> `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source =\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n      width=360px\n      height=200px\n    />\n    <ul class=\"gallery-description\">\n          <li><h3>Likes</h3><p>${image.likes}</p>\n          </li>\n          <li><h3>Views</h3><p>${image.views}</p>\n            </li>\n            <li><h3>Comments</h3><p>${image.comments}</p>\n              </li>\n              <li><h3>Downloads</h3><p>${image.downloads}</p>\n                </li>\n          </ul>\n  </a>\n</li>\n`).join(\"\");\n    galleryRef.insertAdjacentHTML(\"beforeend\", markup);\n    const galleryCfg = {\n    captionsData: 'alt',\n  };\n  let lightbox = new SimpleLightbox('.gallery a', galleryCfg);\n  lightbox.on('show.simplelightbox', function () {});\n  lightbox.refresh();\n}\n\nexport function showEndOfCollectionMessage() {\n    const markupMessege = `<p class= \"end-message\">\"We're sorry, but you've reached the end of search results.\"</p>`\n    galleryRef.insertAdjacentHTML(\"afterend\", markupMessege);\n}","const loadMoreBtnRef = document.querySelector(\".load-more-btn\");\nconst loaderRef = document.querySelector(\".loader\");\n\nexport function hideLoader() {\n  return loaderRef.classList.add('hidden');\n};\n\nexport function showLoader() {\n  return loaderRef.classList.remove('hidden');\n};\n\nexport function showEndOfCollectionMessage() {\n  iziToast.error({\n    title: 'Error',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n};\n\nexport function showLoadMoreBtn() {\n  loadMoreBtnRef.style.display = 'block';\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtnRef.style.display = 'none';\n}\n\nexport function hideEndOfCollectionMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}","//\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { formRef, inputRef, galleryRef, fetchImg } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\nimport { hideLoader, showLoader, showEndOfCollectionMessage, showLoadMoreBtn, hideLoadMoreBtn, hideEndOfCollectionMessage } from \"./js/loaderBtnFunction\";\n\nlet queryInput = ''; \nlet page = 1;\nconst perPage = 15;\n\nformRef.addEventListener(\"submit\", renderImg);\n\nasync function renderImg(event){\n    event.preventDefault();\n    queryInput = inputRef.value.trim(); \n    page = 1;\n    galleryRef.innerHTML = '';\n    if (queryInput === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n        });\n        hideLoadMoreBtn();\n\n    return;\n    }\n    hideEndOfCollectionMessage();\n    showLoader();\n    try {\n        const response = await fetchImg(queryInput, page, perPage);\n        const totalHits = response.totalHits;\n\n         if (response.hits.length === 0) {\n      galleryRef.innerHTML = '';\n      iziToast.info({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      createMarkup(response.hits);\n      inputRef.value = '';\n      showLoadMoreBtn();\n    }\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n        }\n       \n    }\n    catch(error) {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, an error occurred while fetching images. Please try again later!\",\n            });\n        } finally {\n    hideLoader();\n        };\n    };\n"],"names":["formRef","inputRef","galleryRef","fetchImg","queryInput","page","perPage","axios","createMarkup","data","images","markup","image","galleryCfg","lightbox","SimpleLightbox","loadMoreBtnRef","loaderRef","hideLoader","showLoader","showEndOfCollectionMessage","showLoadMoreBtn","hideLoadMoreBtn","hideEndOfCollectionMessage","endMessage","renderImg","event","iziToast","response","totalHits"],"mappings":"owBAEO,MAAMA,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAa,SAAS,cAAc,UAAU,EAGpD,eAAeC,EAASC,EAAYC,EAAMC,EAAS,CAgBtD,OAZiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACR,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACb,CACL,CAAC,GAEmB,IACpB,CCpBO,SAASE,EAAaC,EAAM,CAC/BP,EAAW,UAAY,GACvB,MAAMQ,EAASD,EAAK,KAChBC,EAAO,SAAW,GACd,SAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACzB,CAAa,EAEP,MAAMC,EAASD,EAAO,IACvBE,GAAS;AAAA,kCACoBA,EAAM,aAAa;AAAA;AAAA;AAAA,aAGxCA,EAAM,YAAY;AAAA,sBACTA,EAAM,aAAa;AAAA,aAC5BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,iCAKUA,EAAM,KAAK;AAAA;AAAA,iCAEXA,EAAM,KAAK;AAAA;AAAA,sCAENA,EAAM,QAAQ;AAAA;AAAA,yCAEXA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,CAKvD,EAAE,KAAK,EAAE,EACNV,EAAW,mBAAmB,YAAaS,CAAM,EACjD,MAAME,EAAa,CACnB,aAAc,KAClB,EACE,IAAIC,EAAW,IAAIC,EAAe,aAAcF,CAAU,EAC1DC,EAAS,GAAG,sBAAuB,UAAY,CAAE,CAAA,EACjDA,EAAS,QAAO,CAClB,CC5CA,MAAME,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAY,SAAS,cAAc,SAAS,EAE3C,SAASC,GAAa,CAC3B,OAAOD,EAAU,UAAU,IAAI,QAAQ,CACzC,CAEO,SAASE,GAAa,CAC3B,OAAOF,EAAU,UAAU,OAAO,QAAQ,CAC5C,CAEO,SAASG,GAA6B,CAC3C,SAAS,MAAM,CACb,MAAO,QACP,QAAS,4DACb,CAAG,CACH,CAEO,SAASC,GAAkB,CAChCL,EAAe,MAAM,QAAU,OACjC,CAEO,SAASM,GAAkB,CAChCN,EAAe,MAAM,QAAU,MACjC,CAEO,SAASO,GAA6B,CAC3C,MAAMC,EAAa,SAAS,cAAc,cAAc,EACpDA,GACFA,EAAW,OAAM,CAErB,CCxBA,IAAIpB,EAAa,GACbC,EAAO,EACX,MAAMC,EAAU,GAEhBN,EAAQ,iBAAiB,SAAUyB,CAAS,EAE5C,eAAeA,EAAUC,EAAM,CAK3B,GAJAA,EAAM,eAAc,EACpBtB,EAAaH,EAAS,MAAM,OAC5BI,EAAO,EACPH,EAAW,UAAY,GACnBE,IAAe,GAAI,CACnBuB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACrB,CAAS,EACDL,IAEJ,MACC,CACDC,IACAJ,IACA,GAAI,CACA,MAAMS,EAAW,MAAMzB,EAASC,EAAYC,EAAMC,CAAO,EACnDuB,EAAYD,EAAS,UAE1B,GAAIA,EAAS,KAAK,SAAW,EAAG,CACnC1B,EAAW,UAAY,GACvByB,EAAS,KAAK,CACZ,MAAO,QACP,QACE,0EACV,CAAO,EACDL,IACA,MACN,MACMd,EAAaoB,EAAS,IAAI,EAC1B3B,EAAS,MAAQ,GACjBoB,IAEEf,EAAU,aAAeuB,IAC3BP,IACAF,IAGD,MACY,CACLO,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yEACzB,CAAa,CACb,QAAkB,CACdT,GAEJ,CAAA"}