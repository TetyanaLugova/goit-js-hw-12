{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/loaderBtnFunction.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const formRef = document.querySelector(\".form\");\nexport const inputRef = document.querySelector(\"#text-search\");\nexport const galleryRef = document.querySelector(\".gallery\");\nexport let queryInput;\n\nexport async function fetchImg(queryInput, page, perPage) {\n     queryInput = encodeURIComponent(queryInput);\n    galleryRef.innerHTML = '<div class=\"loader\"></div>';\n\n    const response = await axios.get(`https://pixabay.com/api/`, {\n        params: {\n        key: \"42941180-7fae3d0b9e1a356f3d7e2df26\",\n        q: queryInput,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n    }\n})\n\n    return response.data;\n}\n       ","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { galleryRef } from \"./pixabay-api\";\n\nexport function createMarkup(data) {\n    galleryRef.innerHTML = '';\n    const images = data.hits;\n    if (images.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n        }\n      const markup = images.map(\n    (image)=> `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source =\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n      width=360px\n      height=200px\n    />\n    <ul class=\"gallery-description\">\n          <li><h3>Likes</h3><p>${image.likes}</p>\n          </li>\n          <li><h3>Views</h3><p>${image.views}</p>\n            </li>\n            <li><h3>Comments</h3><p>${image.comments}</p>\n              </li>\n              <li><h3>Downloads</h3><p>${image.downloads}</p>\n                </li>\n          </ul>\n  </a>\n</li>\n`).join(\"\");\n    galleryRef.insertAdjacentHTML(\"beforeend\", markup);\n    const galleryCfg = {\n    captionsData: 'alt',\n  };\n  let lightbox = new SimpleLightbox('.gallery a', galleryCfg);\n  lightbox.on('show.simplelightbox', function () {});\n  lightbox.refresh();\n}\n\nexport function showEndOfCollectionMessage() {\n    const markupMessege = `<p class= \"end-message\">\"We're sorry, but you've reached the end of search results.\"</p>`\n    galleryRef.insertAdjacentHTML(\"afterend\", markupMessege);\n}","export const loadMoreBtnRef = document.querySelector(\".load-more-btn\");\nconst loaderRef = document.querySelector(\".loader\");\n\nexport function hideLoader() {\n  return loaderRef.classList.add('hidden');\n};\n\nexport function showLoader() {\n  return loaderRef.classList.remove('hidden');\n};\n\n\nexport function showLoadMoreBtn() {\n  loadMoreBtnRef.style.display = 'block';\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtnRef.style.display = 'none';\n}\n\nexport function hideEndOfCollectionMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}","//\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { formRef, inputRef, galleryRef, fetchImg } from \"./js/pixabay-api\";\nimport { createMarkup, showEndOfCollectionMessage } from \"./js/render-functions\";\nimport { hideLoader, showLoader, showLoadMoreBtn, hideLoadMoreBtn, hideEndOfCollectionMessage, loadMoreBtnRef } from \"./js/loaderBtnFunction\";\n\n\n\nlet queryInput = ''; \nlet page = 1;\nconst perPage = 15;\n\nhideLoader();\nhideLoadMoreBtn();\n\nformRef.addEventListener(\"submit\", renderImg);\n\nasync function renderImg(event){\n    event.preventDefault();\n    queryInput = inputRef.value.trim(); \n    page = 1;\n    galleryRef.innerHTML = '';\n    if (queryInput === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n        });\n        hideLoadMoreBtn();\n    return;\n    }\n    hideEndOfCollectionMessage();\n    showLoader();\n    try {\n        const response = await fetchImg(queryInput, page, perPage);\n        const totalHits = response.totalHits;\n\n         if (response.hits.length === 0) {\n      galleryRef.innerHTML = '';\n      iziToast.info({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      createMarkup(response.hits);\n      inputRef.value = '';\n      showLoadMoreBtn();\n    }\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n        }\n       \n    }\n    catch(error) {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, an error occurred while fetching images. Please try again later!\",\n            });\n        } finally {\n    hideLoader();\n        };\n    };\n\n    loadMoreBtnRef.addEventListener('click', async () => {\n  try {\n    if (loadMoreBtn) {\n      page += 1;\n    }\n    const response = await fetchImages(queryInput, page, perPage);\n    const totalHits = response.totalHits;\n\n    createMarkup(response.hits);\n    showLoader();\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n    }\n\n    const galleryCardHeight =\n      galleryRef.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});"],"names":["formRef","inputRef","galleryRef","fetchImg","queryInput","page","perPage","axios","createMarkup","data","images","markup","image","galleryCfg","lightbox","SimpleLightbox","showEndOfCollectionMessage","markupMessege","loadMoreBtnRef","loaderRef","hideLoader","showLoader","showLoadMoreBtn","hideLoadMoreBtn","hideEndOfCollectionMessage","endMessage","renderImg","event","iziToast","response","totalHits","galleryCardHeight","error"],"mappings":"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"}