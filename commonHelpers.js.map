{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/loaderBtnFunction.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const formRef = document.querySelector('.form');\nexport const inputRef = document.querySelector('#text-search');\nexport const galleryRef = document.querySelector('.gallery');\nexport let queryInput;\n\nexport async function fetchImg(queryInput, page, perPage) {\n  queryInput = encodeURIComponent(queryInput);\n  galleryRef.innerHTML = '<div class=\"loader\"></div>';\n\n  const response = await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: '42941180-7fae3d0b9e1a356f3d7e2df26',\n      q: queryInput,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    },\n  });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { galleryRef } from './pixabay-api';\n\n// const galleryCfg = {\n//   captionsData: 'alt',\n// };\n// let lightbox = new SimpleLightbox('.gallery a', galleryCfg);\n// lightbox.on('show.simplelightbox', function () {});\n// lightbox.refresh();\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.refresh();\n\nexport function createMarkup(data) {\n  const markup = data\n    .map(\n      image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source =\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n      width=360px\n      height=200px\n    />\n    <ul class=\"gallery-description\">\n          <li><h3>Likes</h3><p>${image.likes}</p>\n          </li>\n          <li><h3>Views</h3><p>${image.views}</p>\n            </li>\n            <li><h3>Comments</h3><p>${image.comments}</p>\n              </li>\n              <li><h3>Downloads</h3><p>${image.downloads}</p>\n                </li>\n          </ul>\n  </a>\n</li>\n`\n    )\n    .join('');\n  galleryRef.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showEndOfCollectionMessage() {\n  const markupMessege = `<p class= \"end-message\">\"We're sorry, but you've reached the end of search results.\"</p>`;\n  galleryRef.insertAdjacentHTML('afterend', markupMessege);\n}\n","export const loadMoreBtnRef = document.querySelector('.load-more-btn');\nconst loaderRef = document.querySelector('.loader');\n\nexport function hideLoader() {\n  return loaderRef.classList.add('hidden');\n}\n\nexport function showLoader() {\n  return loaderRef.classList.remove('hidden');\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreBtnRef.style.display = 'block';\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtnRef.style.display = 'none';\n}\n\nexport function hideEndOfCollectionMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { formRef, inputRef, galleryRef, fetchImg } from './js/pixabay-api.js';\nimport {\n  createMarkup,\n  showEndOfCollectionMessage,\n} from './js/render-functions.js';\nimport {\n  hideLoader,\n  showLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  hideEndOfCollectionMessage,\n  loadMoreBtnRef,\n} from './js/loaderBtnFunction.js';\n\nlet queryInput = '';\nlet page = 1;\nconst perPage = 15;\n\nhideLoader();\nhideLoadMoreBtn();\n\nformRef.addEventListener('submit', renderImg);\n\nasync function renderImg(event) {\n  event.preventDefault();\n  queryInput = inputRef.value.trim();\n  page = 1;\n  galleryRef.innerHTML = '';\n  if (queryInput === '') {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    hideLoadMoreBtn();\n    return;\n  }\n  hideEndOfCollectionMessage();\n  showLoader();\n  try {\n    const response = await fetchImg(queryInput, page, perPage);\n    const totalHits = response.totalHits;\n    if (response.hits.length === 0) {\n      galleryRef.innerHTML = '';\n      iziToast.info({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      createMarkup(response.hits);\n      showLoadMoreBtn();\n    }\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, an error occurred while fetching images. Please try again later!',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nloadMoreBtnRef.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n  try {\n    const response = await fetchImg(queryInput, page, perPage);\n    const totalHits = response.totalHits;\n    createMarkup(response.hits);\n    showLoader();\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n    }\n    const galleryCardHeight =\n      galleryRef.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["formRef","inputRef","galleryRef","fetchImg","queryInput","page","perPage","axios","lightbox","SimpleLightbox","createMarkup","data","markup","image","showEndOfCollectionMessage","markupMessege","loadMoreBtnRef","loaderRef","hideLoader","showLoader","showLoadMoreBtn","hideLoadMoreBtn","hideEndOfCollectionMessage","endMessage","renderImg","event","iziToast","response","totalHits","galleryCardHeight","error"],"mappings":"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"}